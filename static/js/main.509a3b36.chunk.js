(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{24:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__gFleu",dialogItems:"Dialogs_dialogItems__35Qvr",messages:"Dialogs_messages__3jGC3",active:"Dialogs_active__oWX9l"}},30:function(e,t,s){e.exports={dialog:"DialogItem_dialog__uYfsi",active:"DialogItem_active__18CaZ"}},31:function(e,t,s){e.exports={photo:"Users_photo__REC5o",currentPage:"Users_currentPage__Rx7z7"}},32:function(e,t,s){e.exports={preloader:"Loader_preloader__fYzbT",spinner:"Loader_spinner__AThDK",spin:"Loader_spin__6ev1d"}},33:function(e,t,s){e.exports={item:"Post_item__3k4G7",message:"Post_message__z_7fi"}},34:function(e,t,s){e.exports={header:"Header_header__32p_P",loginBlock:"Header_loginBlock__1IWZa"}},35:function(e,t,s){},45:function(e,t,s){},47:function(e,t,s){e.exports={message:"MessageItem_message__YBdBy"}},48:function(e,t,s){e.exports={oblozhka:"ProfileInfo_oblozhka__3LpDv"}},55:function(e,t,s){},6:function(e,t,s){e.exports={nav:"Navbar_nav__Q-6Y2",item:"Navbar_item__2iWJE",active:"Navbar_active__ps-OT",friends:"Navbar_friends__26zMo"}},60:function(e,t,s){},61:function(e,t,s){},62:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(1),c=s.n(n),i=(s(35),function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,83)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;s(e),a(e),n(e),c(e),i(e)}))}),r=s(19),o=s(23),l=s(2),u="UPDATE-NEW-POST",j="ADD-POST",d="SET-USER-PROFILE",g={PostsData:[{id:1,message:"hello everyone"},{id:2,message:"its my blog"},{id:3,message:"like twitter"},{id:4,message:"but better"}],NewPost:"",profile:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:var s={id:5,message:e.NewPost};return Object(l.a)(Object(l.a)({},e),{},{PostsData:[].concat(Object(o.a)(e.PostsData),[s]),NewPost:""});case u:return Object(l.a)(Object(l.a)({},e),{},{NewPost:t.newText});case d:return Object(l.a)(Object(l.a)({},e),{},{profile:t.profile});default:return e}},b="ADD-MESSAGE",h="UPDATE-NEW-MESSAGE",f={DialogsData:[{id:1,name:"Alex"},{id:2,name:"Igor"},{id:3,name:"Sasha"}],MessagesData:[{id:1,message:"hi"},{id:2,message:"ha"},{id:3,message:"ho"}],NewMessage:""},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:var s={id:4,message:e.NewMessage};return Object(l.a)(Object(l.a)({},e),{},{MessagesData:[].concat(Object(o.a)(e.MessagesData),[s]),NewMessage:""});case h:return Object(l.a)(Object(l.a)({},e),{},{NewMessage:t.newMessage});default:return e}},m="FOLLOW",v="UNFOLLOW",x="SET-USERS",P="SET-CURRENT-PAGE",_="SET-TOTAL-USERS-COUNT",w="TOGGLE-IS-FETCHING",N={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(l.a)(Object(l.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(l.a)(Object(l.a)({},e),{},{followed:!0}):e}))});case v:return Object(l.a)(Object(l.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(l.a)(Object(l.a)({},e),{},{followed:!1}):e}))});case x:return Object(l.a)(Object(l.a)({},e),{},{users:t.users});case P:return Object(l.a)(Object(l.a)({},e),{},{currentPage:t.currentPage});case _:return Object(l.a)(Object(l.a)({},e),{},{totalUsersCount:t.totalCount});case w:return Object(l.a)(Object(l.a)({},e),{},{isFetching:t.isFetching});default:return e}},D="SET-USER-DATA",U={userId:null,email:null,login:null,isAuth:!1,isFetching:!1},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(l.a)(Object(l.a)(Object(l.a)({},e),t.data),{},{isAuth:!0});default:return e}},y=Object(r.b)({ProfilePage:p,DialogsPage:O,UsersPage:C,auth:S}),k=Object(r.c)(y),I=s(21),E=s.n(I),M=(s(55),s(6)),F=s.n(M),T=s(5),A=function(){return Object(a.jsxs)("nav",{className:F.a.nav,children:[Object(a.jsx)("div",{className:F.a.item,children:Object(a.jsx)(T.b,{to:"/profile",activeClassName:F.a.active,children:"Profile"})}),Object(a.jsx)("div",{className:F.a.item,children:Object(a.jsx)(T.b,{to:"/dialogs",activeClassName:F.a.active,children:"Messages"})}),Object(a.jsx)("div",{className:F.a.item,children:Object(a.jsx)(T.b,{to:"/news",activeClassName:F.a.active,children:"News"})}),Object(a.jsx)("div",{className:F.a.item,children:Object(a.jsx)(T.b,{to:"/music",activeClassName:F.a.active,children:"Music"})}),Object(a.jsx)("div",{className:F.a.item,children:Object(a.jsx)(T.b,{to:"/settings",activeClassName:F.a.active,children:"Settings"})}),Object(a.jsx)("div",{className:F.a.item,children:Object(a.jsx)(T.b,{to:"/users",activeClassName:F.a.active,children:"Find user"})}),Object(a.jsx)("div",{className:"".concat(F.a.item," ").concat(F.a.friends),children:Object(a.jsx)(T.b,{to:"/friends",activeClassName:F.a.active,children:"Friends"})})]})},z=s(4),L=(s(60),function(e){return Object(a.jsx)("div",{children:"Music"})}),R=(s(61),function(e){return Object(a.jsx)("div",{children:"News"})}),G=(s(62),function(e){return Object(a.jsx)("div",{children:"Settings"})}),B=s(24),W=s.n(B),Y=s(30),H=s.n(Y),J=function(e){return Object(a.jsx)("div",{className:H.a.dialog,children:Object(a.jsx)(T.b,{to:"/dialogs/id".concat(e.id),activeClassName:H.a.active,children:e.name})})},K=s(47),Q=s.n(K),Z=function(e){return Object(a.jsx)("div",{className:Q.a.message,children:e.message})},X=function(e){var t=e.DialogsPage.DialogsData.map((function(e){return Object(a.jsx)(J,{id:e.id,name:e.name},e.id)})),s=e.DialogsPage.MessagesData.map((function(e){return Object(a.jsx)(Z,{message:e.message},e.id)})),n=c.a.createRef();return Object(a.jsxs)("div",{className:W.a.dialogs,children:[Object(a.jsx)("div",{className:W.a.dialogItems,children:t}),Object(a.jsxs)("div",{className:W.a.messages,children:[s,Object(a.jsx)("textarea",{ref:n,onChange:function(t){var s=t.target.value;e.changeMessage(s)},value:e.DialogsPage.NewMessage}),Object(a.jsx)("button",{onClick:function(){e.addMessage()},children:"new message"})]})]})},q=s(11),V=Object(q.b)((function(e){return{DialogsPage:e.DialogsPage}}),(function(e){return{changeMessage:function(t){e(function(e){return{type:h,newMessage:e}}(t))},addMessage:function(){e({type:b})}}}))(X),$=s(15),ee=s(16),te=s(18),se=s(17),ae=s(13),ne=s.n(ae),ce=s(31),ie=s.n(ce),re=s.p+"static/media/no-avatar.57b4e4a6.png",oe=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],n=1;n<=t;n++)s.push(n);return Object(a.jsxs)("div",{children:[s.map((function(t){return Object(a.jsx)("span",{className:e.currentPage===t&&ie.a.currentPage,onClick:function(){e.changePage(t)},children:t})})),e.users.map((function(t){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[Object(a.jsx)("div",{children:Object(a.jsx)(T.b,{to:"/profile/"+t.id,children:Object(a.jsx)("img",{className:ie.a.photo,src:null!=t.photos.small?t.photos.small:re})})}),Object(a.jsx)("div",{children:t.followed?Object(a.jsx)("button",{onClick:function(){ne.a.delete("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{withCredentials:!0,headers:{"API-KEY":"758acc3e-254f-40a8-9d09-25e8036572bf"}}).then((function(s){0==s.data.resultCode&&e.unfollow(t.id)}))},children:"Unfollow"}):Object(a.jsx)("button",{onClick:function(){ne.a.post("https://social-network.samuraijs.com/api/1.0/follow/".concat(t.id),{},{withCredentials:!0,headers:{"API-KEY":"758acc3e-254f-40a8-9d09-25e8036572bf"}}).then((function(s){0==s.data.resultCode&&e.follow(t.id)}))},children:"Follow"})})]}),Object(a.jsxs)("span",{children:[Object(a.jsxs)("span",{children:[Object(a.jsx)("div",{children:t.name}),Object(a.jsx)("div",{children:t.status})]}),Object(a.jsxs)("span",{children:[Object(a.jsx)("div",{children:"user.location.country"}),Object(a.jsx)("div",{children:"user.location.city"})]})]})]},t.id)}))]})},le=s(32),ue=s.n(le),je=function(e){return Object(a.jsx)("div",{className:ue.a.preloader,children:Object(a.jsx)("div",{className:ue.a.spinner})})},de=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){var a;return Object($.a)(this,s),(a=t.call(this,e)).changePage=function(e){a.props.toggleIsFetching(!0),a.props.setCurrentPage(e),ne.a.get("https://social-network.samuraijs.com/api/1.0/users?page=".concat(e,"&count=").concat(a.props.pageSize),{withCredentials:!0}).then((function(e){a.props.setUsers(e.data.items)})),a.props.toggleIsFetching(!1)},a}return Object(ee.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.props.toggleIsFetching(!0),ne.a.get("https://social-network.samuraijs.com/api/1.0/users?page=".concat(this.props.currentPage,"&count=").concat(this.props.pageSize),{withCredentials:!0}).then((function(t){e.props.toggleIsFetching(!1),e.props.setUsers(t.data.items),e.props.setTotalUsersCount(t.data.totalCount)}))}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[this.props.isFetching?Object(a.jsx)(je,{}):null,Object(a.jsx)(oe,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,changePage:this.changePage,follow:this.props.follow,unfollow:this.props.unfollow})]})}}]),s}(c.a.Component),ge=Object(q.b)((function(e){return{users:e.UsersPage.users,pageSize:e.UsersPage.pageSize,totalUsersCount:e.UsersPage.totalUsersCount,currentPage:e.UsersPage.currentPage,isFetching:e.UsersPage.isFetching}}),{follow:function(e){return{type:m,userId:e}},unfollow:function(e){return{type:v,userId:e}},setUsers:function(e){return{type:x,users:e}},setCurrentPage:function(e){return{type:P,currentPage:e}},setTotalUsersCount:function(e){return{type:_,totalCount:e}},toggleIsFetching:function(e){return{type:w,isFetching:e}}})(de),pe=(s(45),s(48)),be=s.n(pe),he=function(e){return null==e.profile?Object(a.jsx)(je,{}):Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{className:be.a.oblozhka,src:"https://oren-m7.ru/images/400/DSC100498782.jpg"})}),Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:e.profile.photos.large})}),Object(a.jsx)("div",{children:e.profile.aboutMe})]})},fe=(s(81),s(33)),Oe=s.n(fe),me=function(e){return Object(a.jsxs)("div",{className:Oe.a.item,children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:"https://avatars.mds.yandex.net/get-zen_doc/105853/pub_5cfe815283e84200af3e43e5_5cfe839285b5e500afe2eeb1/scale_1200"})}),Object(a.jsx)("div",{className:Oe.a.message,children:e.message})]})},ve=function(e){var t=e.ProfilePage.PostsData.map((function(e){return Object(a.jsx)(me,{message:e.message},e.id)})),s=c.a.createRef();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("textarea",{onChange:function(){var t=s.current.value;e.changePost(t)},ref:s,value:e.ProfilePage.NewPost}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{onClick:function(){e.addPost()},children:"new post"})})]}),Object(a.jsx)("div",{children:t.reverse()})]})},xe=Object(q.b)((function(e){return{ProfilePage:e.ProfilePage}}),(function(e){return{changePost:function(t){e(function(e){return{type:u,newText:e}}(t))},addPost:function(){e({type:j})}}}))(ve),Pe=function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)(he,{profile:e.profile}),Object(a.jsx)(xe,{store:e.store})]})},_e=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(e){return Object($.a)(this,s),t.call(this,e)}return Object(ee.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;null==t&&(t=14216),ne.a.get("https://social-network.samuraijs.com/api/1.0/profile/".concat(t)).then((function(t){e.props.setUserProfile(t.data)}))}},{key:"render",value:function(){return Object(a.jsx)(Pe,Object(l.a)(Object(l.a)({},this.props),{},{profile:this.props.profile}))}}]),s}(c.a.Component),we=Object(z.e)(_e),Ne=Object(q.b)((function(e){return{profile:e.ProfilePage.profile}}),{setUserProfile:function(e){return{type:d,profile:e}}})(we),Ce=s(34),De=s.n(Ce),Ue=function(e){return Object(a.jsxs)("header",{className:De.a.header,children:[Object(a.jsx)("img",{src:"https://w7.pngwing.com/pngs/649/377/png-transparent-vkontakte-font-awesome-computer-software-computer-icons-model-logo-twitter-hd-black-\u0433\u0440\u0443\u043f\u043f\u0430-\u0432\u043a\u043e\u043d\u0442\u0430\u043a\u0442.png"}),Object(a.jsx)("div",{className:De.a.loginBlock,children:e.isAuth?e.email:Object(a.jsx)(T.b,{to:"/login",children:"login"})})]})},Se=function(e){Object(te.a)(s,e);var t=Object(se.a)(s);function s(){return Object($.a)(this,s),t.apply(this,arguments)}return Object(ee.a)(s,[{key:"componentDidMount",value:function(){var e=this;ne.a.get("https://social-network.samuraijs.com/api/1.0/auth/me",{withCredentials:!0}).then((function(t){if(0===t.data.resultCode){var s=t.data.data,a=s.id,n=s.email,c=s.login;e.props.SetAuthUserData(a,n,c)}}))}},{key:"render",value:function(){return Object(a.jsx)(Ue,Object(l.a)({},this.props))}}]),s}(c.a.Component),ye=Object(q.b)((function(e){return{isAuth:e.auth.isAuth,email:e.auth.email}}),{SetAuthUserData:function(e,t,s){return{type:D,data:{userId:e,email:t,login:s}}}})(Se),ke=function(e){return Object(a.jsxs)("div",{className:"app-wrapper",children:[Object(a.jsx)(ye,{}),Object(a.jsx)(A,{}),Object(a.jsxs)("div",{className:"app-wrapper-content",children:[Object(a.jsx)(z.a,{path:"/music",component:L}),Object(a.jsx)(z.a,{path:"/news",component:R}),Object(a.jsx)(z.a,{path:"/settings",component:G}),Object(a.jsx)(z.a,{path:"/dialogs",render:function(){return Object(a.jsx)(V,{})}}),Object(a.jsx)(z.a,{path:"/profile/:userId?",render:function(){return Object(a.jsx)(Ne,{})}}),Object(a.jsx)(z.a,{path:"/users",render:function(){return Object(a.jsx)(ge,{})}})]})]})};E.a.render(Object(a.jsx)(T.a,{children:Object(a.jsx)(q.a,{store:k,children:Object(a.jsx)(ke,{})})}),document.getElementById("root")),i()}},[[82,1,2]]]);
//# sourceMappingURL=main.509a3b36.chunk.js.map